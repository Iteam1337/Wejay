<!doctype html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>Wejay</title>
    <script src="javascript/Lib/jquery-1.8.3.min.js" type="text/javascript"></script>
    <script src="javascript/Lib/jquery.tmpl.min.js" type="text/javascript"></script>
    <script src="javascript/Lib/socket.io.js" type="text/javascript"></script>
    <script src="javascript/Lib/moment.min.js" type="text/javascript"></script>
    <script src="javascript/hub.js" type="text/javascript"></script>
    <script src="javascript/room.js" type="text/javascript"></script>
    <script src="javascript/notifier.js" type="text/javascript"></script>
    <script src="javascript/app.js" type="text/javascript"></script>
    <script src="javascript/user.js" type="text/javascript"></script>
    <link rel="stylesheet" href="sp://import/css/adam.css" />
    <link rel="stylesheet" href="sp://import/css/api.css" />
    <link rel="stylesheet" href="sp://import/css/list.css" />
    <link rel="stylesheet" href="http://wejay.org/content/css/bugfixes.css" />
    <link rel="stylesheet" href="style/main.css" />
</head>
<body>
    <!--
    ||
    || OFFLINE
    ||
    -->
    <div id="offline">
        <div>
            <h1>
                This application is not available when offline</h1>
            <p>
            </p>
        </div>
    </div>
    <!--
    ||
    || ONLINE
    || This is where the main content should be put. Use this to really hide everything of the user is offline.
    ||
    -->
    <div id="online">
        <!--
        ||
        || TUTORIAL
        ||
        -->
        <div id="tutorialWrap">
            <div id="tutorial">
                <div id="tutClose">
                    Close tutorial</div>
                <div id="tutStart">
                    <img src="images/wejay-logo-64x64.png" id="tutLogo" alt="wejay" />
                    How does it work?
                    <div class="subtitle">
                        scroll down to find out<div class="arrow">
                            ></div>
                    </div>
                </div>
                <div id="coworkers">
                    Four coworkers are logged in
                    <ul>
                        <li>
                            <div class="coworkerImg">
                                <img src="images/portrait/ron.jpg" alt="ron" /></div>
                            Ron</li>
                        <li>
                            <div class="coworkerImg">
                                <img src="images/portrait/michael.jpg" alt="michael" /></div>
                            Michael</li>
                        <li>
                            <div class="coworkerImg">
                                <img src="images/portrait/samir.jpg" alt="samir" /></div>
                            Samir</li>
                        <li>
                            <div class="coworkerImg">
                                <img src="images/portrait/milton.jpg" alt="milton" /></div>
                            Milton</li>
                    </ul>
                </div>
                <div id="fadeIn1" class="tutAdd">
                    <h3>
                        Ron adds five songs from the same album</h3>
                    <div class="image">
                        <img src="images/covers/icecube.jpg">
                    </div>
                                        <div class="image">
                        <img src="images/covers/icecube.jpg">
                    </div>
                                        <div class="image">
                        <img src="images/covers/icecube.jpg">
                    </div>
                                        <div class="image">
                        <img src="images/covers/icecube.jpg">
                    </div>
                                        <div class="image">
                        <img src="images/covers/icecube.jpg">
                    </div>
                    <div class="songDesc">
                        <img ng-src="images/portrait/ron.jpg" class="userImg">
                        <p>
                            Ice Cube - Lethal Injection</p>
                        <div class="desc">
                        </div>
                    </div>
                </div>
                <div id="fadeIn4" class="tutAdd">
                    <h3>
                        Ron adds another song</h3>
                    <div class="image">
                        <img src="images/covers/scarface.jpg">
                    </div>
                    <div class="songDesc">
                        <img ng-src="images/portrait/ron.jpg" class="userImg">
                        <p>
                            Scarface - No Tears</p>
                        <div class="desc">
                        </div>
                    </div>
                </div>
                <div id="fadeIn3" class="tutAdd">
                    <h3>
                        Michael adds</h3>
                    <div class="image">
                        <img src="images/covers/gangsta.jpg">
                    </div>
                    <div class="songDesc">
                        <img ng-src="images/portrait/michael.jpg" class="userImg">
                        <p>
                            Geto Boys - Damn It Feels Good to Be a Gangsta</p>
                        <div class="desc">
                            Michael's track will be mixed in between Ron's.</div>
                    </div>
                </div>
                <div id="fadeIn2" class="tutAdd">
                    <h3>
                        Samir adds</h3>
                    <div class="image">
                        <img src="images/covers/sv.jpg">
                    </div>
                    <div class="songDesc">
                        <img ng-src="images/portrait/samir.jpg" class="userImg">
                        <p>
                            Slum Village - Get Dis Money</p>
                        <div class="desc">
                            Samir is a sporadic user. His song will have priority over Michael's</div>
                    </div>
                </div>
                <div id="fadeIn5" class="tutAdd">
                    <h3>
                        Milton adds</h3>
                    <div class="image">
                        <img src="images/covers/prado.jpg">
                    </div>
                    <div class="songDesc">
                        <img ng-src="images/portrait/milton.jpg" class="userImg">
                        <p>
                            Perez Prado - Mambo #8</p>
                        <div class="desc">
                            But the song is blocked by Samir</div>
                    </div>
                </div>
            </div>
            <div id="tutQueue">
                <div id="tutInner">
                    <h3>Current queue <span id="queueLength">(0)</span></h3>
                    <ul>
                        <li class="tutQueue queuefadeIn1">
                            <img src="images/covers/icecube.jpg" class="queueImg">
                            Ice Cube - The Shot (Intro)
                            <div class="addedBy">Ron</div>
                        </li>
                                                                                                <li class="tutQueue queuefadeIn2">
                            <img src="images/covers/sv.jpg" class="queueImg">
                            Slum Village - Get Dis Money
                            <div class="addedBy">Samir</div>
                        </li>
                                                                                                                     <li class="tutQueue queuefadeIn3">
                            <img src="images/covers/gangsta.jpg" class="queueImg">
                            Geto Boys - Damn It Feels Good to Be a Gangsta
                            <div class="addedBy">Michael</div>
                        </li>
                                                <li class="tutQueue queuefadeIn1">
                            <img src="images/covers/icecube.jpg" class="queueImg">
                            Ice Cube - Really Doe
                            <div class="addedBy">Ron</div>
                        </li>
                                                <li class="tutQueue queuefadeIn1">
                            <img src="images/covers/icecube.jpg" class="queueImg">
                            Ice Cube - Ghetto Bird
                            <div class="addedBy">Ron</div>
                        </li>
                                                <li class="tutQueue queuefadeIn1">
                            <img src="images/covers/icecube.jpg" class="queueImg">
                            Ice Cube - You Know How We Do It
                            <div class="addedBy">Ron</div>
                        </li>
                                                <li class="tutQueue queuefadeIn1">
                            <img src="images/covers/icecube.jpg" class="queueImg">
                            Ice Cube - Cave Bitch
                            <div class="addedBy">Ron</div>
                        </li>

                                                                        <li class="tutQueue queuefadeIn4">
                            <img src="images/covers/scarface.jpg" class="queueImg">
                            Scarface - No Tears
                            <div class="addedBy">Ron</div>
                        </li>
                                                                                                <li class="tutQueue blocked queuefadeIn5">
                            <img src="images/covers/prado.jpg" class="queueImg">
                            Perez Prado - Mambo #8
                            <div class="addedBy">Milton</div>
                        </li>
                    </ul>
                </div>
            </div>
        </div>
        <!--
        ||
        || OVERLAYS
        ||
        -->
        <div id="overlay">
            <div id="facebook" class="buttons disclaimerRooms">
                <h2 id="disclaimerLogin">
                    MUSIC FOR TEAMS</h2>
                <div class="disclaimer rooms">
                    <p>
                        After you have logged in you and your coworkers can add songs to a shared playlist
                        which will be organized in a democratic way. For example, if some of your coworkers
                        add 30 songs from their favorite death metal band - you can interrupt that with
                        your favorite music and the democratic mix will see to it that you both get your
                        music played.</p>
                    <p>
                        To get started, just open a WEJAY ROOM on one computer with speakers and everyone
                        else can add songs to that playlist.</p>
                    <p id="disclaimerText">
                        <label for="fb-checkbox">I understand that when I log into my Facebook account below, Facebook will be able
                        to associate information about my Spotify use, such as library and listening history,
                        with my Facebook account. Facebook's collection and use of this information will
                        be governed by the Facebook Privacy Policy.</label>
                    </p>
                    <div id="tutorialBtn">
                        How does it work?</div>
                    <input type="checkbox" class="checkbox" id="fb-checkbox"/>
                    <button class="sp-button" id="roomLogin" disabled>
                        Login with Facebook</button>
                </div>
            </div>
        </div>
        <div id="overlayLimit">
            <div id="addedTracksLimitReached">
            </div>
        </div>
        <div id="background">
        </div>
        <!--
        ||
        || MAIN VIEW
        ||
        -->
        <div id="main">
            <!--
            ||
            || BRANDING
            ||
            -->
            <div id="branding">
                <a href="spotify:app:wejay:choose">
                    <img src="Images/wejay-logo.png" id="logo" /></a>
            </div>
            <!-- wejay/start -->
            <section id="roomSection">
                    <section id="current">
                        <div class="top">
                            <div class="left">
                                <div id="currentHolder">
                                    <div class="hover">
                                        <a id="start" href="#" title="play/pause room"></a>
                                    </div>
                                    <a id="currentLink" href="" draggable="true">
                                        <span class="hidden title"></span>
                                        <img class="image" draggable="false" alt="current albumcover" id="currentAlbum" src="sp://import/img/placeholders/300-album.png"/>
                                    </a>
                                </div>
                            </div>
                            <h2 id="onair">PLAYING</h2>
                            <h1 id="roomTitle">Room</h1>
                            <div class="right">
                                <h3 id="currentSong">
                                    <span id="currentArtist"></span>
                                    <span id="currentTrack"></span>
                                </h3>
                                <h4 id="currentPlayedBy"></h4>
                                <a class="button" title="I love this song" id="like" href="#"></a>
                                <div id="likeHover">
                                    <div id="likeAverage"></div>
                                    <div id="likeHoverText">is the current vote for this song in this room.</div>
                                </div>
                                <a class="button" title="vote" id="voteButton" href="#">Skip</a>
                                <div id="skipHover">
                                    Skip or block songs you don't want to hear anymore.
                                </div>
                                <div id="voteOverlay">
                                    <div>
                                        <a class="close" title="close"></a>
                                        <h1>Skip or block?</h1>
                                        <p>Do you want to skip this song or skip and also block it from ever being played when you are logged in? Be careful when skipping other's music, it might backfire ;)</p>
                                        <a class="button" title="Skip this song" id="skip" href="#">Skip</a>
                                        <a class="button" title="Block this song from ever playing again" id="block" href="#">Block</a>
                                    </div>
                                </div>
                            </div>
                        </div>
                         <div id="sharePopup">
                            <input type="button" id="closeShare" title="close" value="" />
                            <h1>Share this room</h1>
                            <p>The fun begins when your coworkers start adding music to the mix. Invite them here via email or facebook.</p>
                            <a class="button" href="#" id="shareOnFacebook" title="Share room on Facebook">Share on Facebook</a>
                            <a class="button" href="#" id="shareOnMail" title="Share by Mail">Share by Mail</a>
                            <a class="button" href="#" id="shareOnURL" title="Share URL">Share URL</a>
                            <div id="manualShare" class="hide">
                                <input type="text" id="shareURL" value="" />
                            </div>
                        </div>
                        <div class="middle clearfix">
                            <div class="left">
                                <h2 id="currentQueueNumber">CURRENT QUEUE</h2>
                                <div class="auto-completeForm"></div>
                                <ul id="queue">
                                </ul>
                            </div>
                            <div class="right">
                                <div class="logged in">
                                    <h2>Logged in Wejays</h2>
                                    <ul id="users"></ul>
                                    <p>Stay logged in to ensure your vote is respected. Auto-logout after one hour.</p>
                                    <span class="buttons">
                                        <button class="sp-button" id="leaveRoom">Leave room</button>
                                        <button class="sp-button" id="joinRoom">Join room</button>
                                        <a class="button" href="#" id="share" title="Invite coworkers">Invite coworkers</a>
                                    </span>
                                </div>
                                <div class="toplist">
                                    <h2>Your spotify toplist</h2>
                                    <ul id="userToplist"></ul>
                                    <p id="plusToAdd">Press + to add tracks to the mix</p>
                                </div>
                            </div>
                        </div>
                        <blockquote>Add music to this room by dragging tracks to this app</blockquote>
                    </section>   
                    <footer class="bottom">
                        <address>Active song selections are always played first and sorted in a way so that users get equal play time. When the active playlist is empty, the MAESTRO bot keeps playing music logged-in users have added before.<a href="http://wejay.org" class="link external inverted" title="wejay.org">wejay.org</a></address>
                    </footer>
                </section>
            <!-- wejay/end -->
            <!-- rooms/start -->
            <section id="chooseSection" class="current">
                    <section>
                        <span id="loginInformation">
                            <p>WEJAY is built for teams. When you and your colleages start mixing your music with WEJAY, all of you will be more productive and social.</p>
                        </span>
                        <div class="middle clearfix">
                            <div class="left">
                                <span id="roomsInformation">
                                    <h1>FIND YOUR coworkerS</h1>
                                    <p>If any of your facebook friends have created a room, it will be shown below. Otherwise, create one yourself. It takes less than one second. ;-)</p>
                                    <ul class="rooms" id="rooms"></ul>
                                    <div class="loadingIndicator">
                                        <img src="images/loading.gif" alt="loading" />
                                    </div>
                                    <button id="createRoom" class="sp-button">Create room</button>
                                </span>
                                <div id="enterRoomBanner">
                                    <p>To start using WEJAY you need to create a WEJAY ROOM. You will start playing WEJAY on one computer which will be the master and everyone will be able to control the music via a mixed playlist. Enter a name, for example: INITECH or SCRANTON</p>
                                    <form id="roomSelectBanner" action="#roomSection">
                                        <input type="text" value="" id="roomNameBanner" placeholder="CHOOSE ROOM NAME" />
                                        <input type="submit" value="GO" />
                                    </form>
                                </div>
                            </div>
                            <div class="right">
                                <div class="banner">
                                    <h2>Find a WEJAY Room</h2>
                                    <p>If you know the name of a WEJAY room, enter the name below. You can also create a new room by entering a new name below. </p>
                                    <form id="roomSelect" action="#roomSection">
                                        <input type="text" value="" id="roomName" placeholder="Wejay Room Name" />
                                        <input type="submit" class="sp-button" value="Enter" />
                                    </form>
                                </div>
                                <div class="second banner">
                                    <div id="signedInAs"></div>
                                    <button class="sp-button" id="signoutFromTheApp">Sign out</button>
                                </div>
                            </div>
                        </div>
                    </section>
                    <footer class="bottom">
                        <address>By logging in with your Facebook account you accept that WEJAY may use and store information from your Spotify library.<a href="http://wejay.org" class="link external inverted" title="wejay.org">wejay.org</a></address>
                    </footer>
                </section>
            <!-- rooms/end -->
            <!-- about/start -->
            <section id="aboutSection">
                    <section>
                        <span>
                            <h1>About Wejay</h1>
                            <div class="rows">
                                <p>Most of us work in an open-plan office. There are many approaches to music in the workplace - complete silence, isolation-via-headphones, a musical dictator or the path of least resistance (mainstream commercial radio satisfying nobody). None of these solutions seem very palatable.</p>
                                <p>Enter <a href="http://wejay.org">WEJAY</a>! Research shows that music promotes productivity, as long as you get a say in its selection. Wejay plays the music you and your coworkers select. The queue will be ordered in a way that will feel fair to all. The sound will be streamed from Spotify via the WEJAY App to your speakers.</a></p>
                            </div>
                            <div id="tutorialBtnHowDoesItWork" class="center">How does it work?</div>
                        </span>
                        
                        <span>
                            <h2>Democratic rules</h2>
                            <ul>
                                <li>Your music will be mixed into a democratic playlist.</li>
                                <li>A set of mixing rules decide the order of each track.</li>
                                <li>After a few weeks you will start seeing the bot called MAESTRO. It will be your assistant DJ.</li>
                            </ul>
                            <ul class="left"><h3>Mixing rules</h3>
                                <li>Mix tracks - No one can have more than one track played when others have tracks waiting.</li>
                                <li>Sporadic users get priority. Instant gratification.</li>
                                <li>Veto - Everyone can block tracks which will be respected as long as they are logged in.</li>
                                <li>A max length of 10 minutes per song to prevent cheating ;)</li>
                            </ul>
                            <ul class="right"><h3>Intelligent rules - MAESTRO bot rules</h3>
                                <li>Automatically play music that has been played more than one time before.</li>
                                <li>Give priority to music all logged in users love.</li>
                                <li>Never play same track more than once a day.</li>
                                <li>Respect blocking votes</li>
                                <li>Try to find patterns. Christmas music in December, party music on Fridays.</li>
                            </ul>
                            <p class="clear">Please be patient with the automatic bot, it will not add tracks you haven't added yourself, therefore it takes a while until it has gotten enough tracks to choose from. Make sure to be as active as possible and you will soon be rewarded. <!--A tip is to drag the "Starred" playlist from your left menu directly to the WEJAY app to instantly learn WEJAY about your favorite tracks.--></p>
                        </span>

                        <span>
                            <h2>Iteam</h2>
                            <div class="rows">
                                <p>The team behind WEJAY are <a href="http://iteam.se">Iteam</a>, Stockholm-based system developers focused on inventing the future. We have used Wejay in different incarnations and perfected its selection algorithms at our own office for over ten years. We are hiring!</p>
                            </div>
                        </span>
                    </section>
                    <footer class="bottom">
                        <address>WEJAY have an automatic bot called MAESTRO which will try to match your music taste. Both WEJAY and MAESTRO will respect the logged in users vote. Use your voting power to assure WEJAY waits until you log out before playing that incessant summer hit from 1992. MAESTRO only plays music that you have played more than once, and to keep things fresh it will not play the same song more than once a day.<a href="http://wejay.org" class="link external inverted" title="wejay.org">wejay.org</a></address>
                    </footer>
                </section>
            <!-- about/end -->
        </div>
        <!--
        ||
        || NOTIFIER
        ||
        -->
        <div id="notifierHolder">
            <span id="closeNotifierHolder"></span>
        </div>
        <!--
    ||
    || END ONLINE
    ||
    -->
    </div>
    <!--
    ||
    || TEMPLATES
    ||
    -->
    <!-- Current music in playlist -->
    <script id="addedTracksLimitReachedTemplate" type="text/x-jquery-tmpl">
        <h2>There is a limit of ${max} tracks</h2>
        <p>
            WEJAY only accepts 10 songs at a time. The reason is simple: everyone should be able to hear their own favorite music!
            <br/>
            
        </p>
        <button class="button accept">Add 10 tracks</button>
        <button class="button cancel">Don't add</button>
    </script>
    <!-- Logged in users -->
    <script id="usersTemplate" type="text/x-jquery-tmpl">
        <li><span><img class="image" alt="${unescape(UserName)}" src="http://graph.facebook.com/${FacebookId}/picture"><p>${unescape(UserName)}</p><p class="time">${CheckedIn}</p></span></li>
    </script>
    <!-- Current music in playlist -->
    <script id="queueTemplate" type="text/x-jquery-tmpl">
        <li><!--<span class="star no${Vote}"></span>--><div class="song"><a class="track ${PlayedBy.FacebookId == (app.user ? app.user.facebookId : '') ? 'mine' : ''}" href="spotify:track:${SpotifyId}"><strong>${Artist}</strong> - ${Title}</a><span class="user">Added by ${unescape(PlayedBy.UserName)}</span></div></li>
    </script>
    <!-- Current music in playlist -->
    <script id="userToplistTemplate" type="text/x-jquery-tmpl">
        <li><a class="addSongToQueue" href="${uri}"></a><a href="${uri}" class="songInTopList"><strong>${album.artist.name}</strong> - ${name}</a></li>
    </script>
    <!-- RoomList teplate -->
    <script id="roomListTemplate" type="text/x-jquery-tmpl">
        <li><a href="spotify:app:wejay:room:${Name}">${Name}</a></li>
    </script>
    <script id="nothingPlayingTemplate" type="text/x-jquery-tmpl">
        <div class="nothing playing">
            <p><strong>Hello!</strong>A room needs music! Add songs by searching or by dragging tracks or whole playlists to the WEJAY app in the sidebar. Don't forget to invite you coworkers - WEJAY was made to play music together!</p>
        </div>
    </script>
    <script id="noOneIsLoggedInTemplate" type="text/x-jquery-tmpl">
        <li class="noOneIsLoggedIn">When you log into this room your best music will be mixed into the playlist automatically. You can also invite your coworkers below.</li>
    </script>
    <!--
    ||
    || INITIALIZE WEJAY
    ||
    -->
    <script src="//wejay.org/scripts/bugfixes.js" type="text/javascript"></script>
    <script type="text/javascript">
        // initialize Wejay App
        var app, ui;
        app = new App();
        app.init({ version: "1.0.3" });
        ui = sp.require('sp://import/scripts/dnd');
    </script>
</body>
</html>
