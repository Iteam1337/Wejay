<!doctype html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <title>Wejay</title>
        <script src="javascript/jquery-1.7.2.min.js" type="text/javascript"></script>
        <script src="javascript/jquery.tmpl.min.js" type="text/javascript"></script>
        <script src="http://wejay.org:81/socket.io/socket.io.js" type="text/javascript"></script>
        <link rel="stylesheet" href="sp://import/css/adam.css"/> 
        <link rel="stylesheet" href="sp://import/css/api.css"/>
        <link rel="stylesheet" href="http://wejay.org/content/css/bugfixes.css"/>
        <link rel="stylesheet" href="style/main.css"/>
        <script src="javascript/hub.js" type="text/javascript"></script>
        <script src="javascript/room.js" type="text/javascript"></script>
        <script src="javascript/app.js" type="text/javascript"></script>
        <script src="javascript/user.js" type="text/javascript"></script>
    </head>
    <body>
        <div id="main">
            <!-- open a room/start -->
            <section id="chooseSection" class="current">
                <section>
                    <span>
                        <h1>We are the DJ.</h1>
                        <p>No more discussions, no more band bashing, no more competition over the shared office sound system. You work better to the tunes of your favorite music, and Wejay makes that happen - for everyone.</p>
                    </span>
                    <span>
                        <h1>Wejay Rooms</h1>
                        <p>All music in Wejay is played in rooms. Join a room to listen and add your own tracks.</p>
                        <ul class="rooms" id="rooms"></ul>
                        <script id="roomListTemplate" type="text/x-jquery-tmpl">
                            <li><a href="spotify:app:room:${Name}">${Name}</a></li>
                        </script>
                        <script id="roomTopListTemplate" type="text/x-jquery-tmpl">
                            <dl><img alt="${UserName}" src="http://graph.facebook.com/${FacebookId}/picture"></dl>
                        </script>
                    </span>
                    <div class="banner">
                        <h2>Enter a Wejay Room</h2>
						<p>Is your room not in the list above, or you want to start a new one? Fret not, just enter the room name here!</p>
                        <form action="#roomSection" class="input" onsubmit="app.currentRoom.init(this.roomName.value, true); document.location = 'spotify:app:wejay:room'; return false;">
                            <input type="text" value="" id="roomName" placeholder="Wejay Room Name" />
                            <input type="submit" class="sp-button" value="Enter" />
                        </form>
                    </div>
                    <span class="buttons">
                        <h2>Login</h2>
                        <button class="sp-button" id="roomLogin">Login with Facebook</button>
                        <button class="sp-button" id="roomLogout">Logout</button>
                    </span>
                </section>
                <footer class="bottom">
                    <address>By logging in with your Facebook account you accept that Wejay may use and store information from your Spotify library.</address>
                </footer>
            </section>
            <!-- open a room/end -->
            <!-- wejay/start -->
            <section id="roomSection">
                <section id="current">
                    <div class="top">
                        <div class="left">
                            <div id="currentHolder">
                                <div class="hover">
                                    <a id="start" href="javascript:app.currentRoom.playSong(app.currentRoom.currentSong, true); return false;"></a>
                                </div>
                                <a id="currentLink" href="" onclick="">
                                    <img class="image" alt="current albumcover" id="currentAlbum" src="sp://import/img/placeholders/300-album.png"/>
                                </a>
                            </div>
                        </div>
                        <h1 id="roomTitle">Room</h1>
                        <div class="right">
                            <h3 id="currentSong"></h3>
                            <h4 id="currentPlayedBy"></h4>
                            <a class="button" title="Like this song" id="like" href="javascript:app.currentRoom.like()">Like</a>
                            <a class="button" title="Block this song from playing" id="block" href="javascript:app.currentRoom.block()">Block</a>
                            <a class="button" title="Skip this song" id="skip" href="javascript:app.currentRoom.skip()">Skip</a>
                        </div>
                    </div>
                    <div class="middle">
                        <div class="left">
                            <h2>Current playlist</h2>
                            <div class="auto-completeForm"></div>
                            <ul id="queue"></ul>
                        </div>
                        <div class="right">
                            <div class="logged in">
                                <h2>Logged in Wejays</h2>
                                <ul id="users"></ul>
                                <span class="buttons">
                                    <a class="button" href="http://facebook.com/sharer.php?u=http://open.spotify.com/app/wejay" id="shareFacebook" title="Invite friends">Invite friends</a>
                                    <button class="sp-button" id="login">Login with Facebook</button>
                                    <button class="sp-button" id="logout">Logout</button>
                                </span>
                            </div>
                            <div class="toplist">
                                <h2>Your toplist</h2>
                                <ul id="userToplist"></ul>
                            </div>
                        </div>
                    </div>
                </section>
				<blockquote>Add music to this room by dragging tracks to this app</blockquote>
                <footer class="bottom">
                    <address>
						Active song selections are always played first and sorted in a way so that users get equal play time. When the active playlist is empty, the intelligent Maestro bot keeps playing music logged-in users like.</address>
                </footer>
                <!-- Logged in users -->
                <script id="usersTemplate" type="text/x-jquery-tmpl">
                    {{if Online}}
                        <li><a href="${(app.user.friends || []) .indexOf(FacebookId) >= 0 ? 'spotify:user:facebook:' + FacebookId : '#wejaysSection' }" ><img class="image" alt="${UserName}" src="http://graph.facebook.com/${FacebookId}/picture"><p>${UserName}</p></li></a>
                    {{/if}}
                </script>
                <!-- Current music in playlist -->
                <script id="queueTemplate" type="text/x-jquery-tmpl">
                    <li><span class="star no${Vote}"></span><div class="song"><a class="track ${PlayedBy.FacebookId == (app.user ? app.user.facebookId : '') ? 'mine' : ''}" href="spotify:track:${SpotifyId}"><strong>${Artist}</strong> - ${Title}</a><a class="user" href="spotify:user:facebook:${PlayedBy.FacebookId}">Added by ${unescape(PlayedBy.UserName)}</a></div></li>
                </script>
                <!-- Current music in playlist -->
                <script id="userToplistTemplate" type="text/x-jquery-tmpl">
                    <li><a href="${uri}"><strong>${album.artist.name}</strong> - ${name}</a></li>
                </script>
            </section>
            <!-- wejay/end -->
            <!-- about/start -->
            <section id="aboutSection">
                <section>
                    <span>
                        <h1>About Wejay</h1>
						<p>Most of us work in an open-plan office. There are many approaches to music in the workplace - complete silence, isolation-via-headphones, a musical dictator or the path of least resistance (mainstream commercial radio satisfying nobody). None of these solutions seem very palatable.</p>
						<p>Enter <a href="http://wejay.org">Wejay</a>! Research shows that music promotes productivity, as long as you get a say in its selection. Wejay plays the music you and your colleagues select, in a You and your colleagues queues music in a room. The queue will be ordered in a way that will feel fair to all. The sound will be streamed from Spotify via the Wejay App to your speakers.</a>
                    </span>
                </section>
                <footer class="bottom">
                    <address>Wejay will not automatically add tracks that logged-in users don't like. Use your voting power to assure Wejay waits until you log out before playing that incessant summer hit from 1992. Also, to keep things fresh, Wejay never automatically plays the same song more than once a week or the same artist more than once a day.</address>
                </footer>
            </section>
            <!-- about/end -->
        </div>
        <script src="http://wejay.org/scripts/bugfixes.js" type="text/javascript"></script>
        <script type="text/javascript">
            // initialize Wejay App
            var app = new App();
            app.init({ version: 0.92 });
            var ui = sp.require('sp://import/scripts/dnd');
        </script>
    </body>
</html>
