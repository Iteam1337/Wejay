<!doctype html>
<html lang="en">
	<head>
		<meta charset="utf-8">
		<title>Wejay</title>
		
		<script src="http://wejay.org/scripts/jquery-1.4.1.js" type="text/javascript"></script>
		<script src="http://wejay.org/scripts/jquery.tmpl.min.js" type="text/javascript"></script>
		<script src="http://wejay.org:81/socket.io/socket.io.js" type="text/javascript"></script>

	  

		<link rel="stylesheet" href="sp://import/css/core-dark.css"> 
		<link rel="stylesheet" href="sp://import/css/api.css">


		<script src="javascript/hub.js" type="text/javascript"></script>
		<script src="javascript/room.js" type="text/javascript"></script>
		<script src="javascript/app.js" type="text/javascript"></script>
		<script src="javascript/user.js" type="text/javascript"></script>

	    <link href="style/main.css" type="text/css" rel="stylesheet" />
	   
</head>
		<body >	    
			<div id="main">
				<section id="chooseSection" class="left">
					<h1 class="inverted">WE ARE THE DJ.</h1>
					<h4>Control the music together.</h4>
					
					<ul class="rooms" id="publicRooms">
						<li>Stockholm</li>
						<li>Berlin</li>
						<li>New York</li>
						<li>Tokyo</li>
					</ul>
					
					<ul class="rooms" id="rooms">
						
					</ul>

			        <script id="roomListTemplate" type="text/x-jquery-tmpl">
			            
			            <li><a href="spotify:app:room:${Name}">${Name}</a></li>
			            
			        </script>
						
						
			        <script id="roomTopListTemplate" type="text/x-jquery-tmpl">
			            
			            <dl><img title="${Artist}" src="http://wejay.org/Content/Images/Artists/${Artist}-80x100.png"></dl>
			            
			        </script>
					<div class="footer">
				        
						<div class="banner">
						<h3 class="inverted">Start new room?</h3>
	
							<form action="#/1" onsubmit="app.currentRoom.init($('#roomName').val());">
								<input type="text" value="" id="roomName" placeholder="Name the room"/>
								<input type=submit value="Open">
							</form>
						</div>
						<div class="banner small">
			
							<h3 class="inverted">Find your friends</h3>
							<button id="login">Login</button>
							<button id="logout">Logout</button>
							
	
						</div>
					</div>
					<blockquote>
								By joining a room you and your friends can add songs to a mixed queue. Perfect for an open workspace!
							</blockquote>
					<address> You login with your facebook account and by doing so you accept that Wejay may use and store information from your Spotify library.</address>
				</section>
				<section id="roomSection">
					<h2 id="roomTitle">Room</h2>
					<section id="current">
						<a id="currentLink" href="" onclick="app.currentRoom.playSong(currentRoom.currentSong, true); return false;"><img  id="currentAlbum" src="sp://import/img/placeholders/300-album.png">
						<h3 class="inverted" id="currentSong"> </h3></a>
						<h3 id="currentPlayedBy"></h3>
						<a class="button" href="javascript:app.currentRoom.skip()">Skip</a>
						<a class="button" href="javascript:app.currentRoom.like()">Like</a>
						<a class="button" href="javascript:app.currentRoom.block()">Block</a>

						<blockquote>Add music to this room by dragging tracks to this app in the sidebar.</blockquote>

					</section>
					<section id="queueSection">
						<h3>Queue</h3>
						<table id="queue"></table>
						
			    	    <div class="auto-completeForm">
				        </div>

						<script id="queueTemplate" type="text/x-jquery-tmpl">
							<tr><td><a class="track ${PlayedBy.FacebookId == facebookId ? 'mine' : ''}" href="spotify:track:${SpotifyId}?browse=true">${Artist} - ${Title}</a></td><td><a class="user" href="spotify:user:facebookuid:${PlayedBy.FacebookId}">${PlayedBy.UserName}</a></td></tr>
						</script>
						<blockquote>Add music to this room by dragging tracks to this app. Your music will be mixed with all other wejays.</a></blockquote>
<address>When the queue is empty an automatic DJ called Maestro will try to match your listening pattern as well as possible.
	Your added tracks will be sorted according to a set of democratic rules and mixed with tracks added by other logged in wejays. You can block tracks you don't like by blocking them in the room but be careful.
	
	</address>
					</section>
					<sectio id="wejaysSection">
						<h3 class="inverted">Wejays in this room</h3>
						<ul id="users"></ul>
						
						<script id="usersTemplate" type="text/x-jquery-tmpl">
							<li><a><img class="${Online ? 'online' : 'offline'}" src="http://graph.facebook.com/${FacebookId}/picture?access_token=${FacebookAcessToken}"></li></a>
						</script>
						<blockquote>Invite friends by sharing this link: <input id="roomLink" value="spotify:app:wejay:room"/> or 
							<a href="http://www.facebook.com/sharer.php?u=http://open.spotify.com/app/wejay" id="shareFacebook" title="Share on Facebook...">Share on Facebook</a>
							
							 </blockquote>
					</section>
				</section>
				
			</div>
		  <script>
		  	
		  	// initialize Wejay App
		  	var app = new App();
		  	app.init();
		  	
		  </script>
    	</body>
</html>